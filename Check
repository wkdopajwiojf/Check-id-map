--[[
    DXD: Banlist + Map Loader (Auto)
    ‡∏£‡∏ß‡∏°‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏ö‡∏ô + ‡πÇ‡∏´‡∏•‡∏î script ‡∏ï‡∏≤‡∏° map
    @credit: chatgpt
]]

print("Checking Banlist üîÉ")
for i = 1, 100, math.random(5, 15) do
    task.wait(0.05)
    print("Loading... " .. i .. "%")
end
print("Loading... 100% ‚úÖ")

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏´‡∏•‡∏î remote safely (‡∏Å‡∏•‡∏±‡∏ö‡∏Ñ‡πà‡∏≤: success, resultOrError)
local function safeHttpGet(url)
    local ok, res = pcall(function()
        return game:HttpGet(url)
    end)
    if not ok then
        return false, ("HttpGet failed: %s"):format(tostring(res))
    end
    return true, res
end

-- ‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏ö‡∏ô (‡πÇ‡∏´‡∏•‡∏î‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô banlist ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ä‡πá‡∏Ñ) -- ‡∏ñ‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏•‡πâ‡∏°‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡πÅ‡∏ö‡∏ô (‡πÅ‡∏ï‡πà‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô)
local isBanned = false
do
    local banUrl = "https://raw.githubusercontent.com/wkdopajwiojf/Zombie-game/main/Ban%20land"
    local ok, bodyOrErr = safeHttpGet(banUrl)
    if not ok then
        warn("Warning: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î Banlist -> " .. tostring(bodyOrErr))
        isBanned = false
    else
        local ok2, ret = pcall(function()
            return loadstring(bodyOrErr)()
        end)
        if not ok2 then
            warn("Warning: Banlist execution error -> " .. tostring(ret))
            isBanned = false
        else
            isBanned = (ret == true)
        end
    end
end

if isBanned then
    print("Ban ‚ùå")
    return
end

print("Success ‚úÖ")

-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å URL ‡∏ï‡∏≤‡∏° map, ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏°‡∏û‡∏ó‡∏µ‡πà match ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ default (Chat with me)
local mapId = game.PlaceId
local url

if mapId == 138365924124161 then
    url = "https://raw.githubusercontent.com/wkdopajwiojf/Backrooms-Drift/refs/heads/main/Script"
elseif mapId == 14419907512 then
    url = "https://raw.githubusercontent.com/wkdopajwiojf/Zombie-game/refs/heads/main/Eng%20version%20%E0%B8%94%E0%B8%B1%E0%B8%94%E0%B9%81%E0%B8%9B%E0%B8%A5%E0%B8%87%20script%20%E0%B8%97%E0%B8%B5%E0%B9%88%E0%B8%99%E0%B8%B5%E0%B9%88"
elseif mapId == 9872472334 then
    url = "https://raw.githubusercontent.com/wkdopajwiojf/evade-bypass-countdown/refs/heads/main/Protected_8932730771877973.lua.txt"
elseif mapId == 10449761463 or mapId == 14835828495 or mapId == 17455699549 then
    url = "https://raw.githubusercontent.com/wkdopajwiojf/Tploop/refs/heads/main/pastebin%20%3E%20github"
end

-- Default ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏∏‡∏Å‡πÅ‡∏°‡∏û (‡πÉ‡∏ä‡πâ Chat with me)
local DEFAULT_URL = "https://raw.githubusercontent.com/wkdopajwiojf/Check-id-map/refs/heads/main/Chat%20with%20me"

if not url or url == "" then
    url = DEFAULT_URL
    print("No specific map script found ‚Äî using default Chat with me for all maps.")
else
    print("Found map-specific script. URL: " .. tostring(url))
end

-- ‡πÇ‡∏´‡∏•‡∏î script ‡∏´‡∏•‡∏±‡∏Å ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
local okGet, bodyOrErr = safeHttpGet(url)
if not okGet then
    warn("Failed to download main script: " .. tostring(bodyOrErr))
    -- ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÇ‡∏´‡∏•‡∏î default ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏ñ‡πâ‡∏≤ url ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà default
    if url ~= DEFAULT_URL then
        print("Attempting fallback to default script...")
        local ok2, body2 = safeHttpGet(DEFAULT_URL)
        if ok2 then
            local okRun2, errRun2 = pcall(function()
                loadstring(body2)()
            end)
            if okRun2 then
                print("Fallback default script executed successfully.")
                return
            else
                warn("Fallback execution failed: " .. tostring(errRun2))
                return
            end
        else
            warn("Fallback download also failed: " .. tostring(body2))
            return
        end
    end
    return
end

local okRun, errRun = pcall(function()
    loadstring(bodyOrErr)()
end)

if okRun then
    print("Main script executed successfully.")
else
    warn("Main script execution error: " .. tostring(errRun))
    -- ‡∏ñ‡πâ main ‡πÄ‡∏õ‡πá‡∏ô map-specific ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á fallback ‡πÑ‡∏õ default ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
    if url ~= DEFAULT_URL then
        print("Attempting fallback to default script...")
        local ok2, body2 = safeHttpGet(DEFAULT_URL)
        if ok2 then
            local okRun2, errRun2 = pcall(function()
                loadstring(body2)()
            end)
            if okRun2 then
                print("Fallback default script executed successfully.")
            else
                warn("Fallback execution failed: " .. tostring(errRun2))
            end
        else
            warn("Fallback download failed: " .. tostring(body2))
        end
    end
end
